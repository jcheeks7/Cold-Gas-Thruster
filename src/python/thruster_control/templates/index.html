<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ARENXY TECH // Thruster Control</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --soil-black: #0A0E0A;
      --forest-green: #228B22;
      --moss-veil: #A8D5BA;
      --sage-whisper: #C1D0B5;
      --dew-grey: #B0C4DE;
      --alert-red: #8B0000;
    }

    body {
      background-color: var(--soil-black);
      color: var(--forest-green);
      font-family: monospace;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    #boot {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--soil-black);
      color: var(--forest-green);
      font-family: monospace;
      padding: 40px;
      z-index: 999;
      white-space: pre-line;
      overflow-y: auto;
      animation: fadeOut 4s ease-out forwards;
      animation-delay: 3.5s;
    }

    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }

    .screen {
      display: flex;
      height: 100vh;
      width: 100vw;
      padding: 30px;
      box-sizing: border-box;
    }

    .ascii-logo {
      width: 50%;
      white-space: pre;
      font-size: 18px;
      color: var(--forest-green);
      text-shadow: 0 0 3px var(--forest-green);
      line-height: 1.1;
      overflow-y: auto;
    }

    .terminal-panel {
      width: 50%;
      display: flex;
      flex-direction: column;
      padding-left: 30px;
      font-size: 1.1em;
    }

    .line {
      margin-bottom: 12px;
    }

    .input-line {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .caret {
      width: 10px;
      height: 1em;
      background: var(--forest-green);
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { background: transparent; }
    }

    .ascii-box {
      display: inline-block;
      padding: 4px 10px;
      margin: 6px 0;
      color: var(--dew-grey);
      background-color: transparent;
      border: 1px dashed var(--forest-green);
    }

    .ascii-box.pulse {
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { border-color: var(--forest-green); }
      50% { border-color: var(--sage-whisper); }
    }

    .ascii-button {
      display: inline-block;
      color: var(--forest-green);
      background-color: transparent;
      border: 1px solid var(--forest-green);
      padding: 5px 10px;
      margin-left: 10px;
      font-family: monospace;
      cursor: pointer;
    }

    .ascii-button:disabled {
      color: #555;
      border-color: #555;
      cursor: not-allowed;
    }

    .log-block {
      margin-top: 30px;
    }

    .log-line {
      color: var(--sage-whisper);
      font-size: 0.95em;
    }

    .cmd-label {
      color: var(--forest-green);
    }

    #asciiCountdown {
      font-family: monospace;
      color: var(--moss-veil);
      padding-top: 10px;
      white-space: pre;
    }

    .ascii-header {
      color: var(--forest-green);
      white-space: pre;
      font-size: 14px;
      margin: 20px 0 10px 0;
    }
  </style>
</head>
<body>
  <div id="boot">
    INITIALIZING SYSTEM...
    BOOT SECTOR VERIFIED.
    BIOS DATE: 2075-07-22
    SECURE LINK ESTABLISHED.
    PRESSURE MANIFOLD SYNCED.
    > SYSTEM READY.
  </div>
  <div class="screen">
    <div class="ascii-logo">
      <!-- ASCII leaf logo here -->
      <pre>... your logo ...</pre>
    </div>

    <div class="terminal-panel">
      <div class="ascii-header">
 _______ _    _ _____  _____  _____  ______ _____  _____  
|__   __| |  | |  __ \|  __ \|  __ \|  ____|  __ \|  __ \ 
   | |  | |__| | |__) | |__) | |__) | |__  | |__) | |__) |
   | |  |  __  |  _  /|  ___/|  _  /|  __| |  _  /|  ___/ 
   | |  | |  | | | \ \| |    | | \ \| |____| | \ \| |     
   |_|  |_|  |_|_|  \_\_|    |_|  \_\______|_|  \_\_|     
      </div>

      <form method="post" onsubmit="startCountdownBar();">
        <div class="line">
          <span class="cmd-label">arenyx@thruster</span>:~$ Enter fire duration (s):
        </div>
        <div class="input-line">
          <div class="ascii-box" id="pulseBox">
            <input id="duration" type="number" step="0.1" name="duration" min="0.1" max="5" required style="background: transparent; border: none; color: var(--dew-grey); width: 60px; text-align: center;" /> s
          </div>
        </div>

        <div class="line">
          <label class="cmd-label">arenyx@thruster</label>:~$ Arm system?
          <input type="checkbox" id="armed" onchange="toggleFireButton()" />
        </div>

        <div class="line input-line">
          <span class="cmd-label">arenyx@thruster</span>:~$
          <button class="ascii-button" id="fireBtn" type="submit" disabled>FIRE</button>
          <span class="caret"></span>
        </div>

        {% if message %}
          <div class="line">→ {{ message }}</div>
        {% endif %}

        <div id="asciiCountdown"></div>

        {% if logs %}
        <div class="log-block">
          <div class="line">[LOG: Last 5 firings]</div>
          {% for log in logs %}
            <div class="log-line">[{{ log.timestamp }}] → {{ log.duration }} seconds</div>
          {% endfor %}
        </div>
        {% endif %}
      </form>

      <div class="ascii-header">
 ______  _____  _____  _____  _____  _____  _____ 
|  __ \|  __ \|  __ \|  __ \|  __ \|_   _|/ ____|
| |  | | |  | | |  | | |  | | |__) | | | | (___  
| |  | | |  | | |  | | |  | |  ___/  | |  \___ \ 
| |__| | |__| | |__| | |__| | |     _| |_ ____) |
|_____/|_____/|_____/|_____/|_|    |_____|_____/ 
      </div>

      <div class="diagnostics">
        <div>> SYSTEM DIAGNOSTICS:</div>
        <div>  • Tank Pressure:     <span id="tankPressure">800 psi</span></div>
        <div>  • Valve Status:      <span id="valveStatus">STANDBY</span></div>
        <div>  • Uplink:            SECURE</div>
        <div>  • Gas Type:          CO₂</div>
      </div>
    </div>
  </div>

  <script>
    function toggleFireButton() {
      const armed = document.getElementById('armed').checked;
      const fireBtn = document.getElementById('fireBtn');
      const pulseBox = document.getElementById('pulseBox');
      fireBtn.disabled = !armed;
      pulseBox.classList.toggle('pulse', armed);
    }

    function startCountdownBar() {
      const countdownDiv = document.getElementById("asciiCountdown");
      const valveStatus = document.getElementById("valveStatus");
      const pressure = document.getElementById("tankPressure");
      let duration = parseFloat(document.querySelector('input[name="duration"]').value);
      let totalBars = 20;
      let stepTime = (duration * 1000) / totalBars;
      let current = 0;

      valveStatus.innerText = "FIRING...";
      countdownDiv.innerText = "[FIRING] [                    ]";

      const interval = setInterval(() => {
        current++;
        const filled = "=".repeat(current);
        const empty = " ".repeat(totalBars - current);
        countdownDiv.innerText = `[FIRING] [${filled}${empty}]`;
        if (current >= totalBars) {
          clearInterval(interval);
          countdownDiv.innerText = "[✓] Valve fire complete.";
          valveStatus.innerText = "STANDBY";

          let psi = parseInt(pressure.innerText);
          psi -= Math.floor(duration * 10);
          if (psi < 500) psi = 800;
          pressure.innerText = psi + " psi";
        }
      }, stepTime);
    }
  </script>
</body>
</html>
